<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="layout/template.xhtml">

	<ui:define name="body">

		<p:messages globalOnly="true" styleClass="message" />

		<h:form>
			<rich:panel>
				<f:facet name="header">Bem vindo</f:facet>
				<h1>Registros de Serviços Vinculados ao usuário logado:</h1>
				<br />


				<rich:dataTable
					value="#{servicoAction.carregarServicoPorTecnico(identity.usuario.id)}"
					var="servico" rows="10" reRender="ds" id="simpletable"
					rendered="#{servicoAction.carregarServicoPorTecnico(identity.usuario.id).size > 0}"
					columnClasses="center"
					onRowMouseOver="this.style.backgroundColor='#b2d5d6'"
					onRowMouseOut="this.style.backgroundColor='#FFFFFF'">
					<f:facet name="header">
						<h:outputText value="Serviços" />
					</f:facet>
					<rich:column sortBy="#{servico.numOrdemServico}">
						<f:facet name="header">
							<h:outputText value="Número OS" />
						</f:facet>
						<h:outputText value="#{servico.numOrdemServico}" />
					</rich:column>
					
					<rich:column sortBy="#{servico.dtaAtendimento}">
						<f:facet name="header">
							<h:outputText value="Data Atendimento" />
						</f:facet>
						<h:outputText value="#{servico.dtaAtendimento}" />
					</rich:column>
					
					<rich:column sortBy="#{servico.descrEquipamento}">
						<f:facet name="header">
							<h:outputText value="Descrição Equipamento" />
						</f:facet>
						<h:outputText value="#{servico.descrEquipamento}" />
					</rich:column>
					
					<rich:column sortBy="#{servico.marca}">
						<f:facet name="header">
							<h:outputText value="Marca" />
						</f:facet>
						<h:outputText value="#{servico.marca}" />
					</rich:column>
					
					<rich:column sortBy="#{servico.modelo}">
						<f:facet name="header">
							<h:outputText value="Modelo" />
						</f:facet>
						<h:outputText value="#{servico.modelo}" />
					</rich:column>
					
					<rich:column sortBy="#{servico.defeitoDeclarado}">
						<f:facet name="header">
							<h:outputText value="Defeito Declarado" />
						</f:facet>
						<h:outputText value="#{servico.defeitoDeclarado}" />
					</rich:column>
					
					<rich:column sortBy="#{servico.tipoServico.descricao}">
						<f:facet name="header">
							<h:outputText value="Tipo Serviço" />
						</f:facet>
						<h:outputText value="#{servico.tipoServico.descricao}" />
					</rich:column>
					
					<rich:column sortBy="#{servico.servicoStatus.descricao}">
						<f:facet name="header">
							<h:outputText value="Status Serviço" />
						</f:facet>
						<h:outputText value="#{servico.servicoStatus.descricao}" />
					</rich:column>


					<f:facet name="footer">
						<rich:datascroller id="ds"></rich:datascroller>
					</f:facet>
				</rich:dataTable>
				<s:fragment
					rendered="#{servicoAction.carregarServicoPorTecnico(identity.usuario.id).size == 0}">
						Não existem serviços para esse usuário.
					</s:fragment>



			</rich:panel>

		</h:form>

	</ui:define>
</ui:composition>
